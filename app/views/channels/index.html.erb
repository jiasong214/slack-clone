<%= render :layout => './shared/template' do %>
  <section class="channels">
    <%= render partial: 'header', locals: {title: "Channel browser"} %>

    <%# channel search form %>
    <form action="" class="channels__searchForm">
      <input type=text name="search_term" placeholder="Search by channel name">
    </form>
    
    <%# all public channels list %>
    <ul class="channels__list">
      <% @channels.each do |c| %>
        <li class="channels__list__item">
          <div class="text-container">
            <a href="<%= chats_path c.id %>">
              <div>
                <i>#</i>
                <h3 class="title"><%= c.name %></h3>
              </div>
            </a>
            <div>
              <span class="member"><%= c.users.count %> members</span>
              <span>&#8729;</span>
              <span class="description"><%= c.description %></span>
            </div>
          </div>
          <div class="option-container">
            <%= link_to "View", chats_path(c.id), class:"btn"  %>
            <%= link_to "Join", join_channel_path(c.id), method: 'patch', class:"btn" %>
          </div>
        </li>
      <% end %>
    </ul>

  </section>
<% end %>